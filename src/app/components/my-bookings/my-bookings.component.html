<div class="bg-white rounded-lg shadow-md p-6">
  <div class="flex items-center justify-between mb-6">
    <div class="flex items-center gap-3">
      <button
        (click)="backToSearch()"
        class="p-2 hover:bg-gray-100 rounded-lg transition-colors"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m15 18-6-6 6-6"></path>
        </svg>
      </button>
      <h2 class="text-2xl font-bold text-gray-800">Mis Reservas</h2>
    </div>
    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold">
      {{ filteredBookings().length }} reservas
    </span>
  </div>

  <!-- Filtros -->
  <div class="flex flex-wrap gap-2 mb-6">
    <button
      (click)="setFilter('all')"
      [class]="'px-4 py-2 rounded-lg font-medium transition-colors ' + 
        (filterStatus() === 'all' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200')"
    >
      Todas
    </button>
    <button
      (click)="setFilter('active')"
      [class]="'px-4 py-2 rounded-lg font-medium transition-colors ' + 
        (filterStatus() === 'active' ? 'bg-green-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200')"
    >
      Activas
    </button>
    <button
      (click)="setFilter('completed')"
      [class]="'px-4 py-2 rounded-lg font-medium transition-colors ' + 
        (filterStatus() === 'completed' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200')"
    >
      Completadas
    </button>
    <button
      (click)="setFilter('cancelled')"
      [class]="'px-4 py-2 rounded-lg font-medium transition-colors ' + 
        (filterStatus() === 'cancelled' ? 'bg-red-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200')"
    >
      Canceladas
    </button>
  </div>

  <!-- Lista de reservas -->
  @if (filteredBookings().length === 0) {
    <div class="text-center py-12">
      <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="mx-auto text-gray-300 mb-4">
        <path d="M8 2v4"></path>
        <path d="M16 2v4"></path>
        <rect width="18" height="18" x="3" y="4" rx="2"></rect>
        <path d="M3 10h18"></path>
      </svg>
      <p class="text-gray-500 text-lg">No hay reservas para mostrar</p>
      <p class="text-gray-400 text-sm mt-2">Realiza tu primera reserva para verla aqu√≠</p>
    </div>
  } @else {
    <div class="space-y-4">
      @for (booking of filteredBookings(); track booking.id) {
        <div class="border border-gray-200 rounded-lg p-5 hover:shadow-md transition-shadow">
          <div class="flex items-start justify-between mb-3">
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-2">
                <h3 class="text-lg font-bold text-gray-800">{{ booking.spaceName }}</h3>
                <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">
                  {{ booking.spaceType }}
                </span>
              </div>
              <div class="space-y-1 text-sm text-gray-600">
                <div class="flex items-center gap-2">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                  </svg>
                  <span>{{ booking.building }} - Piso {{ booking.floor }}</span>
                </div>
                <div class="flex items-center gap-2">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M8 2v4"></path>
                    <path d="M16 2v4"></path>
                    <rect width="18" height="18" x="3" y="4" rx="2"></rect>
                    <path d="M3 10h18"></path>
                  </svg>
                  <span>{{ formatDate(booking.date) }}</span>
                </div>
                <div class="flex items-center gap-2">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                  </svg>
                  <span>{{ booking.timeSlot }}</span>
                </div>
              </div>
            </div>
            <span [class]="'text-xs px-3 py-1 rounded-full font-medium ' + getStatusColor(booking.status)">
              {{ getStatusText(booking.status) }}
            </span>
          </div>

          @if (booking.status === 'active') {
            <div class="flex gap-2 mt-4 pt-4 border-t border-gray-200">
              <button
                (click)="cancelBooking(booking.id)"
                class="flex-1 bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg transition-colors text-sm font-medium"
              >
                Cancelar Reserva
              </button>
              <button
                (click)="deleteBooking(booking.id)"
                class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors text-sm"
              >
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M3 6h18"></path>
                  <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                  <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                </svg>
              </button>
            </div>
          } @else {
            <div class="flex gap-2 mt-4 pt-4 border-t border-gray-200">
              <button
                (click)="deleteBooking(booking.id)"
                class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors text-sm font-medium"
              >
                Eliminar
              </button>
            </div>
          }
        </div>
      }
    </div>
  }
</div>